{"version":3,"sources":["post-picker.js"],"names":["$","document","ready","select2","placeholder","ajax","url","wpApiSettings","root","dataType","delay","data","params","search","term","orderby","order","_wpnonce","nonce","processResults","console","log","page","results","map","post","id","text","title","rendered","pagination","more","total_count","cache","escapeMarkup","markup","minimumInputLength","jQuery"],"mappings":"CAMA,SAAWA,GACT,YAEAA,GAAEC,UAAUC,MAAM,WAChBF,EAAE,sBAAsBG,SACtBC,YAAoB,gBACpBC,MACEC,IAAgBC,cAAcC,KAAO,cACrCC,SAAgB,OAChBC,MAAgB,IAChBC,KAAgB,SAAUC,GACxB,OACEC,OAAUD,EAAOE,KACjBC,QAAU,QACVC,MAAU,MACVC,SAAUV,cAAcW,QAG5BC,eAAgB,SAAUR,EAAMC,GAQ9B,MAPAQ,SAAQC,IAAIV,EAAMC,GAKlBA,EAAOU,KAAOV,EAAOU,MAAQ,GAG3BC,QAAYvB,EAAEwB,IAAIb,EAAM,SAASc,GAC/B,OACEC,GAAID,EAAKC,GACTC,KAAMF,EAAKG,MAAMC,YAGrBC,YACEC,KAAqB,GAAdnB,EAAOU,KAAaX,EAAKqB,eAItCC,OAAgB,GAElBC,aAAoB,SAAUC,GAC5B,MAAOA,IAETC,mBAAoB,OAGvBC","file":"../post-picker.js","sourcesContent":["/**\n * Description\n */\n\n/*global wpApiSettings: true*/\n\n(function ($) {\n  'use strict';\n\n  $(document).ready(function () {\n    $('.cappy-post-picker').select2({\n      placeholder       : \"オリジナルがある場合は選択\",\n      ajax              : {\n        url           : wpApiSettings.root + \"wp/v2/posts\",\n        dataType      : 'json',\n        delay         : 250,\n        data          : function (params) {\n          return {\n            search  : params.term,\n            orderby : 'title',\n            order   : 'asc',\n            _wpnonce: wpApiSettings.nonce\n          };\n        },\n        processResults: function (data, params) {\n          console.log(data, params);\n          // parse the results into the format expected by Select2\n          // since we are using custom formatting functions we do not need to\n          // alter the remote JSON data, except to indicate that infinite\n          // scrolling can be used\n          params.page = params.page || 1;\n\n          return {\n            results   : $.map(data, function(post){\n              return {\n                id: post.id,\n                text: post.title.rendered\n              };\n            }),\n            pagination: {\n              more: (params.page * 30) < data.total_count\n            }\n          };\n        },\n        cache         : true\n      },\n      escapeMarkup      : function (markup) {\n        return markup;\n      },\n      minimumInputLength: 1\n    });\n  });\n})(jQuery);\n"]}